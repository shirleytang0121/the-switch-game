{"ast":null,"code":"/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\nvar CONST = require('./const');\n/**\r\n * Calculates and returns the horizontal overlap between two arcade physics bodies and sets their properties\r\n * accordingly, including: `touching.left`, `touching.right`, `touching.none` and `overlapX'.\r\n *\r\n * @function Phaser.Physics.Arcade.GetOverlapX\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Physics.Arcade.Body} body1 - The first Body to separate.\r\n * @param {Phaser.Physics.Arcade.Body} body2 - The second Body to separate.\r\n * @param {boolean} overlapOnly - Is this an overlap only check, or part of separation?\r\n * @param {number} bias - A value added to the delta values during collision checks. Increase it to prevent sprite tunneling(sprites passing through another instead of colliding).\r\n *\r\n * @return {number} The amount of overlap.\r\n */\n\n\nvar GetOverlapX = function GetOverlapX(body1, body2, overlapOnly, bias) {\n  var overlap = 0;\n  var maxOverlap = body1.deltaAbsX() + body2.deltaAbsX() + bias;\n\n  if (body1._dx === 0 && body2._dx === 0) {\n    //  They overlap but neither of them are moving\n    body1.embedded = true;\n    body2.embedded = true;\n  } else if (body1._dx > body2._dx) {\n    //  Body1 is moving right and / or Body2 is moving left\n    overlap = body1.right - body2.x;\n\n    if (overlap > maxOverlap && !overlapOnly || body1.checkCollision.right === false || body2.checkCollision.left === false) {\n      overlap = 0;\n    } else {\n      body1.touching.none = false;\n      body1.touching.right = true;\n      body2.touching.none = false;\n      body2.touching.left = true;\n\n      if (body2.physicsType === CONST.STATIC_BODY) {\n        body1.blocked.none = false;\n        body1.blocked.right = true;\n      }\n\n      if (body1.physicsType === CONST.STATIC_BODY) {\n        body2.blocked.none = false;\n        body2.blocked.left = true;\n      }\n    }\n  } else if (body1._dx < body2._dx) {\n    //  Body1 is moving left and/or Body2 is moving right\n    overlap = body1.x - body2.width - body2.x;\n\n    if (-overlap > maxOverlap && !overlapOnly || body1.checkCollision.left === false || body2.checkCollision.right === false) {\n      overlap = 0;\n    } else {\n      body1.touching.none = false;\n      body1.touching.left = true;\n      body2.touching.none = false;\n      body2.touching.right = true;\n\n      if (body2.physicsType === CONST.STATIC_BODY) {\n        body1.blocked.none = false;\n        body1.blocked.left = true;\n      }\n\n      if (body1.physicsType === CONST.STATIC_BODY) {\n        body2.blocked.none = false;\n        body2.blocked.right = true;\n      }\n    }\n  } //  Resets the overlapX to zero if there is no overlap, or to the actual pixel value if there is\n\n\n  body1.overlapX = overlap;\n  body2.overlapX = overlap;\n  return overlap;\n};\n\nmodule.exports = GetOverlapX;","map":null,"metadata":{},"sourceType":"script"}