{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nexports.NetworkError = NetworkError;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction NetworkError(response, status) {\n  this.name = 'NetworkError';\n  this.status = status;\n  this.response = response;\n} // $FlowFixMe\n\n/* global fetch */\n\n\nNetworkError.prototype = Error.prototype;\nNetworkError.prototype.status = null;\n\nvar tryParseJSON = function tryParseJSON(json) {\n  if (!json) {\n    return null;\n  }\n\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new Error('Failed to parse unexpected JSON response: ' + json);\n  }\n};\n\nvar getResponseBody = function getResponseBody(res) {\n  var contentType = res.headers.get('content-type') || false;\n\n  if (contentType && contentType.indexOf('json') >= 0) {\n    return res.text().then(tryParseJSON);\n  }\n\n  return res.text();\n}; // eslint-disable-next-line no-unused-vars\n\n\nexports.default = function (effect, _action) {\n  var url = effect.url,\n      options = (0, _objectWithoutProperties3.default)(effect, ['url']);\n  var headers = (0, _extends3.default)({\n    'content-type': 'application/json'\n  }, options.headers);\n  return fetch(url, (0, _extends3.default)({}, options, {\n    headers: headers\n  })).then(function (res) {\n    if (res.ok) {\n      return getResponseBody(res);\n    }\n\n    return getResponseBody(res).then(function (body) {\n      throw new NetworkError(body || '', res.status);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"script"}