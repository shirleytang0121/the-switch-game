{"ast":null,"code":"/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\nvar CONST = require('./const');\n/**\r\n * Calculates and returns the vertical overlap between two arcade physics bodies and sets their properties\r\n * accordingly, including: `touching.up`, `touching.down`, `touching.none` and `overlapY'.\r\n *\r\n * @function Phaser.Physics.Arcade.GetOverlapY\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Physics.Arcade.Body} body1 - The first Body to separate.\r\n * @param {Phaser.Physics.Arcade.Body} body2 - The second Body to separate.\r\n * @param {boolean} overlapOnly - Is this an overlap only check, or part of separation?\r\n * @param {number} bias - A value added to the delta values during collision checks. Increase it to prevent sprite tunneling(sprites passing through another instead of colliding).\r\n *\r\n * @return {number} The amount of overlap.\r\n */\n\n\nvar GetOverlapY = function GetOverlapY(body1, body2, overlapOnly, bias) {\n  var overlap = 0;\n  var maxOverlap = body1.deltaAbsY() + body2.deltaAbsY() + bias;\n\n  if (body1._dy === 0 && body2._dy === 0) {\n    //  They overlap but neither of them are moving\n    body1.embedded = true;\n    body2.embedded = true;\n  } else if (body1._dy > body2._dy) {\n    //  Body1 is moving down and/or Body2 is moving up\n    overlap = body1.bottom - body2.y;\n\n    if (overlap > maxOverlap && !overlapOnly || body1.checkCollision.down === false || body2.checkCollision.up === false) {\n      overlap = 0;\n    } else {\n      body1.touching.none = false;\n      body1.touching.down = true;\n      body2.touching.none = false;\n      body2.touching.up = true;\n\n      if (body2.physicsType === CONST.STATIC_BODY) {\n        body1.blocked.none = false;\n        body1.blocked.down = true;\n      }\n\n      if (body1.physicsType === CONST.STATIC_BODY) {\n        body2.blocked.none = false;\n        body2.blocked.up = true;\n      }\n    }\n  } else if (body1._dy < body2._dy) {\n    //  Body1 is moving up and/or Body2 is moving down\n    overlap = body1.y - body2.bottom;\n\n    if (-overlap > maxOverlap && !overlapOnly || body1.checkCollision.up === false || body2.checkCollision.down === false) {\n      overlap = 0;\n    } else {\n      body1.touching.none = false;\n      body1.touching.up = true;\n      body2.touching.none = false;\n      body2.touching.down = true;\n\n      if (body2.physicsType === CONST.STATIC_BODY) {\n        body1.blocked.none = false;\n        body1.blocked.up = true;\n      }\n\n      if (body1.physicsType === CONST.STATIC_BODY) {\n        body2.blocked.none = false;\n        body2.blocked.down = true;\n      }\n    }\n  } //  Resets the overlapY to zero if there is no overlap, or to the actual pixel value if there is\n\n\n  body1.overlapY = overlap;\n  body2.overlapY = overlap;\n  return overlap;\n};\n\nmodule.exports = GetOverlapY;","map":null,"metadata":{},"sourceType":"script"}