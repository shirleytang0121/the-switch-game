{"ast":null,"code":"/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\nfunction hasGetStart(def) {\n  return !!def.getStart && typeof def.getStart === 'function';\n}\n\nfunction hasGetEnd(def) {\n  return !!def.getEnd && typeof def.getEnd === 'function';\n}\n\nfunction hasGetters(def) {\n  return hasGetStart(def) || hasGetEnd(def);\n}\n/**\r\n * Returns `getStart` and `getEnd` functions for a Tween's Data based on a target property and end value.\r\n *\r\n * If the end value is a number, it will be treated as an absolute value and the property will be tweened to it. A string can be provided to specify a relative end value which consists of an operation (`+=` to add to the current value, `-=` to subtract from the current value, `*=` to multiply the current value, or `/=` to divide the current value) followed by its operand. A function can be provided to allow greater control over the end value; it will receive the target object being tweened, the name of the property being tweened, and the current value of the property as its arguments. If both the starting and the ending values need to be controlled, an object with `getStart` and `getEnd` callbacks, which will receive the same arguments, can be provided instead. If an object with a `value` property is provided, the property will be used as the effective value under the same rules described here.\r\n *\r\n * @function Phaser.Tweens.Builders.GetValueOp\r\n * @since 3.0.0\r\n *\r\n * @param {string} key - The name of the property to modify.\r\n * @param {*} propertyValue - The ending value of the property, as described above.\r\n *\r\n * @return {function} An array of two functions, `getStart` and `getEnd`, which return the starting and the ending value of the property based on the provided value.\r\n */\n\n\nvar GetValueOp = function GetValueOp(key, propertyValue) {\n  var callbacks; //  The returned value sets what the property will be at the END of the Tween (usually called at the start of the Tween)\n\n  var getEnd = function getEnd(target, key, value) {\n    return value;\n  }; //  The returned value sets what the property will be at the START of the Tween (usually called at the end of the Tween)\n\n\n  var getStart = function getStart(target, key, value) {\n    return value;\n  };\n\n  var t = typeof propertyValue;\n\n  if (t === 'number') {\n    // props: {\n    //     x: 400,\n    //     y: 300\n    // }\n    getEnd = function getEnd() {\n      return propertyValue;\n    };\n  } else if (t === 'string') {\n    // props: {\n    //     x: '+=400',\n    //     y: '-=300',\n    //     z: '*=2',\n    //     w: '/=2'\n    // }\n    var op = propertyValue[0];\n    var num = parseFloat(propertyValue.substr(2));\n\n    switch (op) {\n      case '+':\n        getEnd = function getEnd(target, key, value) {\n          return value + num;\n        };\n\n        break;\n\n      case '-':\n        getEnd = function getEnd(target, key, value) {\n          return value - num;\n        };\n\n        break;\n\n      case '*':\n        getEnd = function getEnd(target, key, value) {\n          return value * num;\n        };\n\n        break;\n\n      case '/':\n        getEnd = function getEnd(target, key, value) {\n          return value / num;\n        };\n\n        break;\n\n      default:\n        getEnd = function getEnd() {\n          return parseFloat(propertyValue);\n        };\n\n    }\n  } else if (t === 'function') {\n    //  The same as setting just the getEnd function and no getStart\n    // props: {\n    //     x: function (target, key, value) { return value + 50); },\n    // }\n    getEnd = propertyValue;\n  } else if (t === 'object' && hasGetters(propertyValue)) {\n    /*\r\n    x: {\r\n        //  Called at the start of the Tween. The returned value sets what the property will be at the END of the Tween.\r\n        getEnd: function (target, key, value)\r\n        {\r\n            return value;\r\n        },\r\n          //  Called at the end of the Tween. The returned value sets what the property will be at the START of the Tween.\r\n        getStart: function (target, key, value)\r\n        {\r\n            return value;\r\n        }\r\n    }\r\n    */\n    if (hasGetEnd(propertyValue)) {\n      getEnd = propertyValue.getEnd;\n    }\n\n    if (hasGetStart(propertyValue)) {\n      getStart = propertyValue.getStart;\n    }\n  } else if (propertyValue.hasOwnProperty('value')) {\n    //  Value may still be a string, function or a number\n    // props: {\n    //     x: { value: 400, ... },\n    //     y: { value: 300, ... }\n    // }\n    callbacks = GetValueOp(key, propertyValue.value);\n  } //  If callback not set by the else if block above then set it here and return it\n\n\n  if (!callbacks) {\n    callbacks = {\n      getEnd: getEnd,\n      getStart: getStart\n    };\n  }\n\n  return callbacks;\n};\n\nmodule.exports = GetValueOp;","map":null,"metadata":{},"sourceType":"script"}