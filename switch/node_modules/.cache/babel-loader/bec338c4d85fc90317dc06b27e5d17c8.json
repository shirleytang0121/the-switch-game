{"ast":null,"code":"/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\nvar Class = require('../../utils/Class');\n\nvar LightsManager = require('./LightsManager');\n\nvar PluginCache = require('../../plugins/PluginCache');\n\nvar SceneEvents = require('../../scene/events');\n/**\r\n * @classdesc\r\n * A Scene plugin that provides a {@link Phaser.GameObjects.LightsManager} for the Light2D pipeline.\r\n *\r\n * Available from within a Scene via `this.lights`.\r\n *\r\n * Add Lights using the {@link Phaser.GameObjects.LightsManager#addLight} method:\r\n *\r\n * ```javascript\r\n * // Enable the Lights Manager because it is disabled by default\r\n * this.lights.enable();\r\n *\r\n * // Create a Light at [400, 300] with a radius of 200\r\n * this.lights.addLight(400, 300, 200);\r\n * ```\r\n *\r\n * For Game Objects to be affected by the Lights when rendered, you will need to set them to use the `Light2D` pipeline like so:\r\n *\r\n * ```javascript\r\n * sprite.setPipeline('Light2D');\r\n * ```\r\n *\r\n * @class LightsPlugin\r\n * @extends Phaser.GameObjects.LightsManager\r\n * @memberof Phaser.GameObjects\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Scene} scene - The Scene that this Lights Plugin belongs to.\r\n */\n\n\nvar LightsPlugin = new Class({\n  Extends: LightsManager,\n  initialize: function LightsPlugin(scene) {\n    /**\r\n     * A reference to the Scene that this Lights Plugin belongs to.\r\n     *\r\n     * @name Phaser.GameObjects.LightsPlugin#scene\r\n     * @type {Phaser.Scene}\r\n     * @since 3.0.0\r\n     */\n    this.scene = scene;\n    /**\r\n     * A reference to the Scene's systems.\r\n     *\r\n     * @name Phaser.GameObjects.LightsPlugin#systems\r\n     * @type {Phaser.Scenes.Systems}\r\n     * @since 3.0.0\r\n     */\n\n    this.systems = scene.sys;\n\n    if (!scene.sys.settings.isBooted) {\n      scene.sys.events.once(SceneEvents.BOOT, this.boot, this);\n    }\n\n    LightsManager.call(this);\n  },\n\n  /**\r\n   * Boot the Lights Plugin.\r\n   *\r\n   * @method Phaser.GameObjects.LightsPlugin#boot\r\n   * @since 3.0.0\r\n   */\n  boot: function boot() {\n    var eventEmitter = this.systems.events;\n    eventEmitter.on(SceneEvents.SHUTDOWN, this.shutdown, this);\n    eventEmitter.on(SceneEvents.DESTROY, this.destroy, this);\n  },\n\n  /**\r\n   * Destroy the Lights Plugin.\r\n   *\r\n   * Cleans up all references.\r\n   *\r\n   * @method Phaser.GameObjects.LightsPlugin#destroy\r\n   * @since 3.0.0\r\n   */\n  destroy: function destroy() {\n    this.shutdown();\n    this.scene = undefined;\n    this.systems = undefined;\n  }\n});\nPluginCache.register('LightsPlugin', LightsPlugin, 'lights');\nmodule.exports = LightsPlugin;","map":null,"metadata":{},"sourceType":"script"}