{"ast":null,"code":"/**\r\n * Copyright (c) 2015-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\nimport getPromise from './getPromise';\n/**\r\n * Similar to Array.prototype.reduce(), however the reducing callback may return\r\n * a Promise, in which case reduction will continue after each promise resolves.\r\n *\r\n * If the callback does not return a Promise, then this function will also not\r\n * return a Promise.\r\n */\n\nexport default function promiseReduce(values, callback, initialValue) {\n  return values.reduce(function (previous, value) {\n    var promise = getPromise(previous);\n\n    if (promise) {\n      return promise.then(function (resolved) {\n        return callback(resolved, value);\n      });\n    } // Previous is not Promise<U>, so it is U.\n\n\n    return callback(previous, value);\n  }, initialValue);\n}","map":null,"metadata":{},"sourceType":"module"}