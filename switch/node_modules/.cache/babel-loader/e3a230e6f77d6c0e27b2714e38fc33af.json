{"ast":null,"code":"/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\n\n/**\r\n * Master list of tiles -> x, y, index in tileset.\r\n *\r\n * @function Phaser.Tilemaps.Parsers.Tiled.BuildTilesetIndex\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Tilemaps.MapData} mapData - [description]\r\n *\r\n * @return {array} [description]\r\n */\nvar BuildTilesetIndex = function BuildTilesetIndex(mapData) {\n  var tiles = [];\n\n  for (var i = 0; i < mapData.tilesets.length; i++) {\n    var set = mapData.tilesets[i];\n    var x = set.tileMargin;\n    var y = set.tileMargin;\n    var count = 0;\n    var countX = 0;\n    var countY = 0;\n\n    for (var t = set.firstgid; t < set.firstgid + set.total; t++) {\n      //  Can add extra properties here as needed\n      tiles[t] = [x, y, i];\n      x += set.tileWidth + set.tileSpacing;\n      count++;\n\n      if (count === set.total) {\n        break;\n      }\n\n      countX++;\n\n      if (countX === set.columns) {\n        x = set.tileMargin;\n        y += set.tileHeight + set.tileSpacing;\n        countX = 0;\n        countY++;\n\n        if (countY === set.rows) {\n          break;\n        }\n      }\n    }\n  }\n\n  return tiles;\n};\n\nmodule.exports = BuildTilesetIndex;","map":null,"metadata":{},"sourceType":"script"}